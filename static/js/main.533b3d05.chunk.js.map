{"version":3,"sources":["map/search.js","getData/getFourSquare.js","map/tip.js","map/marker.js","getData/getLatLon.js","map/index.js","index.js"],"names":["categories","Search","props","useForm","defaultValues","category","register","handleSubmit","Form","onSubmit","data","console","log","getGeoCode","OverlayTrigger","placement","overlay","Tooltip","Floating","Control","placeholder","type","required","style","paddingLeft","FloatingLabel","controlId","label","Select","map","c","value","icon","faPlane","size","className","faInfoCircle","clientID","clientSecret","TipCard","tip","Card","text","bg","Header","faUser","href","canonicalUrl","target","fontSize","user","firstName","lastName","Body","Text","photourl","Img","variant","src","Date","createdAt","toDateString","Tips","venueid","useState","showTip","setShowTip","loading","setLoading","tips","setTips","onClick","length","id","config","method","url","params","client_id","client_secret","sort","v","axios","then","res","response","items","getTip","Carousel","paddingTop","Item","Marker","detail","showDetail","setShowDetail","prefix","handleClose","Offcanvas","show","onHide","CloseButton","margin","alt","width","height","Title","name","location","address","formattedAddress","delivery","faCar","marginLeft","padding","title","rel","getLatLon","city","get","q","appid","mapboxgl","accessToken","Map","mapContainer","useRef","markers","message","error","setError","useEffect","current","container","center","zoom","pitch","bearing","on","labelLayerId","layers","getStyle","i","layout","addLayer","addControl","NavigationControl","remove","getPlaces","lat","lon","flyTo","essential","ll","toString","section","limit","groups","getTrendings","addMarkers","placeList","forEach","marker","place","ref","React","createRef","document","createElement","ReactDOM","render","venue","newMarker","setLngLat","lng","addTo","push","searchQuery","catch","err","Modal","closeButton","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.533b3d05.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { useForm } from 'react-hook-form';\r\nimport Form from 'react-bootstrap/Form';\r\nimport FloatingLabel from 'react-bootstrap/FloatingLabel';\r\nimport { faPlane, faInfoCircle } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\n\r\nconst categories = ['trending', 'food', 'drinks', 'shops', 'arts', 'sights'];\r\n\r\nconst Search = (props) => {\r\n    const { register, handleSubmit } = useForm({\r\n        defaultValues: {\r\n            category: categories[0]\r\n        }\r\n    }\r\n    );\r\n    const onSubmit = (data) => {\r\n        console.log(data);\r\n        props.getGeoCode(data);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Form onSubmit={handleSubmit(onSubmit)}>\r\n                <OverlayTrigger placement=\"right\"\r\n                    overlay={<Tooltip>Use state code and country code for more precise search results, EX: Dallas, TX, US or Paris, FR</Tooltip>}>\r\n                    <Form.Floating>\r\n                        <Form.Control\r\n                            {...register(\"city\")} placeholder=\"City\" type=\"text\" required />\r\n                        <label>City</label>\r\n                    </Form.Floating>\r\n                </OverlayTrigger>\r\n                <div style={{ paddingLeft: '10px' }}>\r\n                    <FloatingLabel controlId=\"floatingSelect\" label=\"Category\">\r\n                        <Form.Select aria-label=\"Category\" {...register(\"category\")}>\r\n                            {categories.map((c) => (\r\n                                <option key={c} value={c}>{c}</option>\r\n                            ))}\r\n                        </Form.Select>\r\n                    </FloatingLabel>\r\n                </div>\r\n                <button type=\"submit\">\r\n                    Let's gooooo...... <FontAwesomeIcon icon={faPlane}\r\n                        size=\"2x\"\r\n                        type=\"submit\" />\r\n                </button>\r\n            </Form>\r\n            <div className='info'>\r\n                <FontAwesomeIcon icon={faInfoCircle} size=\"1x\" />\r\n                <small > Global place data for 248 countries and territories</small>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Search;","import axios from 'axios';\r\n\r\nconst clientID = \"H4F1E1JSIXBIEVX1ODH3XEQZWXL11OSFZKVKDTZNR0MJFH5R\";\r\nconst clientSecret = \"PSPKPSMZDZHNPZWX0GJWVX0VUL3E21V1LO1JLSME3MXMZE3D\";\r\n\r\nexport const getTrendings = (lat, lon, category) => {\r\n    const fourSquareURL = \"https://api.foursquare.com/v2/venues/explore?\";\r\n    const config = {\r\n        method: 'get',\r\n        url: fourSquareURL,\r\n        params: {\r\n            client_id: clientID, client_secret: clientSecret,\r\n            ll: lat.toString() + \",\" + lon.toString(),\r\n            section: category, limit: \"30\",\r\n            v: \"20190425\"\r\n        }\r\n    }\r\n    return axios(config)\r\n        .then(res => res.data.response.groups[0].items);\r\n}\r\n\r\nexport const getTip = (id) => {\r\n    const url = \"https://api.foursquare.com/v2/venues/\" + id + \"/tips?\";\r\n    const config = {\r\n        method: 'get',\r\n        url: url,\r\n        params: {\r\n            client_id: clientID, client_secret: clientSecret,\r\n            sort: \"popular\",\r\n            v: \"20190425\"\r\n        }\r\n    }\r\n    return axios(config).then(res => res.data.response.tips.items);\r\n}\r\n","import React, { useState } from 'react';\r\nimport Card from 'react-bootstrap/Card';\r\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { getTip } from '../getData/getFourSquare';\r\nimport Carousel from 'react-bootstrap/Carousel'\r\n\r\nconst Tips = ({ venueid }) => {\r\n    const [showTip, setShowTip] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n    const [tips, setTips] = useState([]);\r\n    const fetchTip = () => {\r\n        setShowTip(!showTip);\r\n        if (tips.length === 0 && !showTip) {\r\n            getTip(venueid).then(res => {\r\n                setLoading(false);\r\n                setTips(res);\r\n                console.log(res);\r\n            });\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <button onClick={fetchTip}>Are you curious about other people's thoughts about this place?</button>\r\n            {showTip && !loading && tips.length !== 0 ?\r\n                <Carousel variant=\"light\" style={{ paddingTop: \"15px\" }}>\r\n                    {tips.map((tip) => (<Carousel.Item key={tip.id}><TipCard tip={tip} /></Carousel.Item>))}\r\n                </Carousel>\r\n                : null}\r\n            {(tips.length === 0 && !loading && showTip ? <div style={{ paddingTop: \"15px\" }}>No one has reviewed this place yet :((</div> : null)}\r\n\r\n        </>\r\n    );\r\n}\r\n\r\nconst TipCard = ({ tip }) => {\r\n    return (\r\n        <Card text=\"light\" bg=\"dark\">\r\n            <Card.Header>\r\n                <FontAwesomeIcon className=\"rounded me-2\" icon={faUser}\r\n                    size=\"2x\" />\r\n                <strong className=\"me-auto\">\r\n                    <a href={tip.canonicalUrl} target=\"_blank\">\r\n                        <span style={{ fontSize: \"larger\" }}>\r\n                            {tip.user.firstName}\r\n                            {tip.user.lastName ? <span>{' ' + tip.user.lastName}</span> : null}\r\n                        </span>\r\n                    </a></strong>\r\n            </Card.Header>\r\n            <Card.Body>\r\n                <Card.Text>{tip.text}</Card.Text>\r\n                {tip.photourl ? <Card.Img variant=\"bottom\" src={tip.photourl} /> : null}\r\n                <small className=\"text-muted\">{new Date(tip.createdAt * 1000).toDateString()}</small>\r\n            </Card.Body>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default Tips;","import React, { useState } from 'react';\r\nimport Tips from \"./tip\";\r\nimport CloseButton from 'react-bootstrap/CloseButton'\r\nimport Offcanvas from 'react-bootstrap/Offcanvas'\r\nimport { faCar } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport './marker.css';\r\n\r\nconst Marker = ({ detail }) => {\r\n    const [showDetail, setShowDetail] = useState(false);\r\n    const icon = detail.categories[0].icon.prefix + '64.png';\r\n\r\n    const handleShow = () => {\r\n        console.log(detail);\r\n        setShowDetail(true);\r\n    };\r\n\r\n    const handleClose = () => setShowDetail(false);\r\n    return (\r\n        <>\r\n            <div onClick={handleShow} className=\"marker\" />\r\n            <Offcanvas className=\"details\" show={showDetail} onHide={handleClose} placement='end'>\r\n                <div>\r\n                    <CloseButton variant=\"white\" onClick={handleClose} style={{ margin: '10px' }} />\r\n                    <img className=\"FQicon\" src=\"/powered-by-foursquare-white.png\" alt=\"PoweredByFourSquare\" width=\"150px\" height=\"10px\" />\r\n                </div>\r\n                <Offcanvas.Header className=\"header\">\r\n                    <Offcanvas.Title ><img src={icon} alt={detail.id} /><div>{detail.name}</div></Offcanvas.Title>\r\n                </Offcanvas.Header>\r\n                <Offcanvas.Body className=\"detailsBody\">\r\n                    <div>\r\n                        Located at {detail.location.address ? detail.location.address : detail.location.formattedAddress[0]}\r\n                    </div>\r\n                    <div>\r\n                        {detail.delivery ?\r\n                            <> Delivery available\r\n                                <a href={detail.delivery.url} target=\"_blank\">\r\n                                    <FontAwesomeIcon icon={faCar} size=\"2x\" style={{ marginLeft: \"10px\" }} />\r\n                                </a>\r\n                            </> : null}\r\n                    </div>\r\n                    <div><Tips venueid={detail.id} /></div>\r\n                    <div>\r\n                        <a href={'http://foursquare.com/v/' + detail.id} target=\"_blank\">\r\n                            Click for more details\r\n                        </a>\r\n                    </div>\r\n                </Offcanvas.Body>\r\n                <small style={{ padding: '10px' }}>Marker icon made by <a href=\"https://www.freepik.com\" title=\"Freepik\" target=\"_blank\" rel=\"noreferrer\">Freepik</a> from <a href=\"https://www.flaticon.com/\" title=\"Flaticon\" target=\"_blank\" rel=\"noreferrer\">www.flaticon.com</a></small>\r\n            </Offcanvas>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Marker;","import axios from 'axios';\r\n\r\n\r\nconst getLatLon = city => {\r\n    const geoCodeURL = \"https://api.openweathermap.org/geo/1.0/direct?limit=1\";\r\n    const APIkey = \"27cc0f9e54d73d8e67bfafb8beef78e4\";\r\n\r\n    return axios.get(geoCodeURL, { params: { q: city, appid: APIkey } })\r\n        .then(res => res.data[0]);\r\n}\r\n\r\nexport default getLatLon;","import React, { useState, useRef, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './main-page.css';\r\nimport Search from './search';\r\nimport mapboxgl from 'mapbox-gl';\r\nimport Marker from './marker';\r\nimport getLatLon from \"../getData/getLatLon\";\r\nimport { getTrendings } from \"../getData/getFourSquare\";\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\nmapboxgl.accessToken = 'pk.eyJ1IjoidG5ndXllbjQ0IiwiYSI6ImNrcjl5MWNxZTRkazYycG84d29xN3VkM2sifQ.x_cj60SVjn3wRQp9p0_lFw';\r\n\r\nfunction Map() {\r\n    const mapContainer = useRef(null);\r\n    const map = useRef(null);\r\n    const markers = useRef([]);\r\n    const [error, setError] = useState({\r\n        show: false,\r\n        message: 'Something went wrong :('\r\n    });\r\n    const handleClose = () => setError(false);\r\n\r\n    useEffect(() => {\r\n        if (map.current) return; // initialize map only once\r\n        map.current = new mapboxgl.Map({\r\n            container: mapContainer.current,\r\n            style: 'mapbox://styles/mapbox/streets-v11',\r\n            center: [-122.3316, 47.6126],\r\n            zoom: 16.10,\r\n            pitch: 45,\r\n            bearing: -17.6,\r\n        });\r\n        map.current.on('load', function () {\r\n            // Insert the layer beneath any symbol layer.\r\n            var layers = map.current.getStyle().layers;\r\n            var labelLayerId;\r\n            for (var i = 0; i < layers.length; i++) {\r\n                if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {\r\n                    labelLayerId = layers[i].id;\r\n                    break;\r\n                }\r\n            }\r\n            // The 'building' layer in the Mapbox Streets\r\n            // vector tileset contains building height data\r\n            // from OpenStreetMap.\r\n            map.current.addLayer(\r\n                {\r\n                    'id': 'add-3d-buildings',\r\n                    'source': 'composite',\r\n                    'source-layer': 'building',\r\n                    'filter': ['==', 'extrude', 'true'],\r\n                    'type': 'fill-extrusion',\r\n                    'minzoom': 15,\r\n                    'paint': {\r\n                        'fill-extrusion-color': '#aaa',\r\n\r\n                        // Use an 'interpolate' expression to\r\n                        // add a smooth transition effect to\r\n                        // the buildings as the user zooms in.\r\n                        'fill-extrusion-height': [\r\n                            'interpolate',\r\n                            ['linear'],\r\n                            ['zoom'],\r\n                            15,\r\n                            0,\r\n                            15.05,\r\n                            ['get', 'height']\r\n                        ],\r\n                        'fill-extrusion-base': [\r\n                            'interpolate',\r\n                            ['linear'],\r\n                            ['zoom'],\r\n                            15,\r\n                            0,\r\n                            15.05,\r\n                            ['get', 'min_height']\r\n                        ],\r\n                        'fill-extrusion-opacity': 0.6\r\n                    }\r\n                },\r\n\r\n                labelLayerId\r\n            );\r\n\r\n        });\r\n        map.current.addControl(new mapboxgl.NavigationControl(), 'top-right');\r\n        return () => map.current.remove();\r\n    }, []);\r\n\r\n    const getPlaces = (lat, lon, category) => {\r\n        map.current.flyTo({\r\n            center: [lon, lat],\r\n            zoom: 16.10,\r\n            essential: true\r\n        });\r\n        getTrendings(lat, lon, category).then(res => {\r\n            addMarkers(res);\r\n            if (res.length === 0) {\r\n                setError({ show: true, message: \"There aren't a lot of results in this city :( Try something more general\" });\r\n            }\r\n        });\r\n    }\r\n    const getGeoCode = searchQuery => {\r\n        console.log(searchQuery);\r\n        getLatLon(searchQuery.city).then(res => getPlaces(res.lat, res.lon, searchQuery.category))\r\n            .catch(err => {\r\n                console.log(err.response);\r\n                setError({ show: true, message: \"Please enter a valid city\" });\r\n            });\r\n    }\r\n\r\n    const addMarkers = placeList => {\r\n        if (markers.current) {\r\n            markers.current.forEach((marker) => marker.remove());\r\n        }\r\n        placeList.forEach((place) => {\r\n            const ref = React.createRef();\r\n            // Create a new DOM node and save it to the React ref\r\n            ref.current = document.createElement('div');\r\n            // Create a Mapbox Marker at our new DOM node\r\n            ReactDOM.render(\r\n                <Marker detail={place.venue} />,\r\n                ref.current\r\n            );\r\n            const newMarker = new mapboxgl.Marker(ref.current)\r\n                .setLngLat([place.venue.location.lng, place.venue.location.lat])\r\n                .addTo(map.current);\r\n            markers.current.push(newMarker);\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n\r\n            <div className=\"sidebar\">\r\n                <Search getGeoCode={getGeoCode} />\r\n            </div>\r\n            <div ref={mapContainer} className=\"map-container\" />\r\n            <Modal show={error.show} onHide={handleClose}>\r\n                <Modal.Header closeButton>\r\n                    {error.message}\r\n                </Modal.Header>\r\n            </Modal>\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default Map;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\n\nimport App from './map';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}